Changelog:

  + added
  * fixed
  - removed

 1.0:

  * Error message boxes which occur when invalid map file name was provided in
    the browsing dialog are overrided by flashes for Immunity Debugger.
    Immunity guys were clever enough to make main window topmost even for
    their own message boxes. The reason why such message exists at all is
    because of Phant0m driver, which makes every message box coming from
    dialog hook procedure crash the process. This workaround for non-existing
    files doesn't apply to invalid file name warning which also lead to crash.
    The last can not be bypassed prettily, so WONTFIX here.

  * Map file browsing dialog doesn't use old style anymore. This one fixes
    strange behaviour of file name autocompletion, viewing etc.

  * Remapped Options window key shortcut from Ctrl+Shift+M to Ctrl+I. This one
    is to reduce possible collision with other plugins (Multimate Assembler,
    for example).

  * PCRE library updated to 8.30. See http://www.pcre.org/changelog.txt.

  * Forced Immunity Debugger plugin SDK to use 4 byte structure alignment.
    Don't remember if mapimp was affected with this, but still...
    Thanks to RaMMicHaeL for the hint.

 0.94:

  * Fixed a crash which occured when trying to browse for a non-existent file
    with Phant0m "Load driver" feature enabled.

  - Removed "apply to debuggee" feature. Now the names are applied only to
    a currently viewed module. Anybody cares?

  + Added "Read segments from memory" feature. Read README file for more info.

  * Fixed a couple of old bugs with counting applied names twice when both
    comment and label objects were picked and counting names that were skipped
    by filter.

  * Found a map sample, that has names longer than 1024 characters and
    therefore doubled the name buffer.

  * Fixed a bug concerned key shortcut plugin callback. The correct callback
    should return TRUE when it had processed a shortcut and FALSE otherwise.
    Returning false positive result may affect other plugins.

  * Changed importing procedure action order. Now it grabs module information
    before trying to import a map file.

  * PCRE library updated to 8.11. See http://www.pcre.org/changelog.txt.

  * Minor gui behaviour fixes.

 0.9:

  * Some regular expression execution resulted to an empty string marking,
    causing a deadlock.

  * Segment VA information was collected incorrectly.
    IMAGE_SECTION_HEADER->PointerToRelocations, PointerToLineNumbers,
    NumberOfRelocations and NumberOfLineNumbers not necessarily should be
    NULL to make PE file load. Checking those members made mapimp fail to apply
    names to some targets.

  * The number of spaces in a map file which separate segment offset and a name
    is not defined. Usually there are 7 spaces, but recently I've found a map
    file generated by the Borland C Compiler v5.6 (C++BuilderX) which had only
    2 of them. The map file parser failed to load such a file. I've fixed it so
    it is not bound to the number of separating spaces anymore.

  * There may be three sections with names in a map file: "Publics by Value",
    "Publics by Name" and "Static symbols". Each time the map file parser met
    new "Publics" section it created a new list of names, so only the names
    from the last section were applied.

  + Added "i" key prefix that can be used for case insensitive matching. Refer
    to the README file for how to use.

  + Replace masks can now use a pseudo variable to insert substrings that
    matched regular expression. Replace masks' behaviour changed. Refer to the
    README file for more info.

  * Fixed memory leak in mask_compile function. If regular expression
    compilation in replace mask failed, the memory for replacement string could
    not be freed.

  * Fixed memory leak concerned mask list loading, adding and editing. Masks
    from the input list were compiled to a temporary variable which is in the
    stack, not the heap. Nevertheless compiled regular expression code and some
    of it's extras are and they were not freed.

  * Unfortunately there is no debugger function that would allow fast user
    defined names removal. When the name is skipped by a mask filter we add it
    to a removal table (only if overwrite mode is enabled) and then use
    Insertname function with empty names to do the job which is rather slow.
    Now the plugin checks if the name that should be removed exists and makes
    record in the removal table only if it is so. That makes mapimp much faster
    in overwrite mode than it was.

  * PCRE library updated to 8.10. See http://www.pcre.org/changelog.txt.

  * Now Browsefilename() has starting directory for import action equal to
    debuggee's working directory (thanks to PE_Kill for the report).

  + Added warning of the inactive debugging session.

  * Improved log output.

 0.8:

  * Fixed memory leak in mask_apply function.

  * Finally fixed quantifiers' deadlock bug. Match limit modification partially
    solved the problem, but the actual reason was in the filtering behaviour
    (or rather my crooked hands).

  * Former README file said that the order of mask applying is undefined which
    wasn't actually true: they were applied in the order of appearance in the
    list. Now list sorting is disabled, allowing you to build mask chains.
    Intersection is no more a problem.

  + Added "Insert" function for mask manager.

  + Now you can move masks through the list. Use Ctrl + Up/Ctrl + Down for
    moving Up/Down and Ctrl + PgUp/Ctrl + PgDown for moving to the
    beginning/end respectively.

  * Recompiled using static rtl. It doesn't have redistrubutable package
    dependency anymore.

  * PCRE library updated to 8.02. See http://www.pcre.org/changelog.txt.

  * Fixed some minor gui bugs.

  * Improved stability.

 0.7:

  - Removed "Add, "Edit" and "Delete" buttons and implemented context menu for
    mask manager.

  + Now it is possible to save/load mask list alone. Availible from context
    menu and with key shortcuts Ctrl + S/Ctrl + L for "save" and "load"
    operations respectively (thanks to Jupiter for the idea).

  * Fixed a bug in mask_filter function. Local buffers were too short to hold
    some names' parts. That caused stack corruption and thus crash.

  * PCRE library updated to 8.01. See http://www.pcre.org/changelog.txt.

  * Recompiled pcre with PCRE_MATCH_LIMIT set to MAXBUFLEN which default value
    of 10000000 or something like that caused a deadlock while using
    assertions, strong quantifiers like * and so on. Now all regular
    expressions seem to be working ok.

 0.6: (contributed by BoRoV/TSRh)

  + Now doubleclick on a mask opens edit dialog.

  * Better solution for preventing autoimport feature to ask to load/load map
    file every session. Now it makes corresponding record in the udd.

  * Fixed a bug in autoimport which made OllyDbg crash while trying to debug
    files with no extension (spotted by sendersu, thanks).

 0.5:

  + Added name demangling feature.

  + Now it is possible to choose whether to apply names to debugged module or
    currently viewed module.

  * Map file parsing routine was a hack and so rewriten. Should now support
    IDA, DeDe, IDR, Microsoft and Borland (thanks to void and awerto for d2k5+
    tests) linkers' map files and handle names longer than 235 characters
    (string buffer is now 1kb long).

  * PCRE library updated to 8.0. See http://www.pcre.org/changelog.txt.

  * Fixed a bug when mapimp broke import procedure while trying to import a
    name to a module with less number of segments than the name's segment
    addressed.

  * Fixed a bug when OllyDbg crashed while displaying format containing names
    in the progress bar.

  * Fixed a bug with accelerators when it was unable to check\uncheck
    checkboxes using a mouse click. The winner of "The stupidest bug of a year"
    award.

  * Fixed a bug in autoimport feature which made it search for the map file
    every int3 break event including step over (thanks to 9999 for the report).

  * Fixed "Options" window look with Windows themes (thanks to BoRoV for the
    report).

  * Config file moved to plugins folder.

 0.4:

  * Fixed map file parsing routine. Now you can load some
    structure-incorrect map files like those which Interactive Delphi
    Reconstructor exports.

  * Fixed a bug with global shortcuts. ODBG_Pluginshortcut callback
    works reeeally weird. Now press Ctrl + Shift + I to import
    and Ctrl + Shift + M to open options window.

 0.3:

  + Added keyboard shortcuts.

  * Fixed memory leak in mask_filter function.

  * Fixed mask manager's focus and selection behaviour.

  * Fixed a bug when being closed "Options" window did not return focus
    to OllyDbg's main window if it temporarily lost activity.

  * Now autoimport does not search for the map file until debugee changes.

 0.2:

  + Added autoimport feature (thanks to Jupiter for the idea).

  + Added "Edit" button for mask manager.

  * More informative regular expression error messages.

  * Fixed a bug when mapimp did not make the "Options" window modal while
    inputing masks. So if you closed the options window with active input
    box it caused a deadlock.

  * Some interface changes.

 0.1:

  + First release.
